"use strict";!function(){function e(e,t){return t.lastIndex=0,t.test(e)}function t(e){var t="";t=e.length?e.map(function(e){return function(e,t){return e.replace(/\{\w+\}/g,function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""})}(f,{title:e.title,path:e.path,content:function(e){var t=a.value,n=e.indexOf(t),i=e.replace(t,"<b>"+t+"</b>");if(n>0)return i.substr(n-15,45)}(e.text)})}).join(""):'<div class="tips"><p>没有找到相关结果!</p></div>',h.innerHTML=t}function n(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function i(e,t){n(e,t)||(e.className+=" "+t)}function r(e,t){if(n(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}}function s(n){var i=this.value.trim();if(i){var s=new RegExp(i.replace(/[ ]/g,"|"),"gmi");!function(e){if(u)e(u);else{var t=new XMLHttpRequest;t.open("GET","/content.json",!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response||this.responseText);u=t instanceof Array?t:t.posts,e(u)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}(function(n){t(n.filter(function(t){return function(t,n){return e(t.title,n)||e(t.text,n)}(t,s)}))}),n.preventDefault(),r(l,"hide"),r(d,"hide"),a.onfocus=function(){r(l,"hide"),r(d,"hide")}}else t("")}var o,c,u,a=document.getElementById("search-key"),d=(document.getElementById("search-local"),document.getElementById("search-form"),document.getElementById("result-mask")),l=document.getElementById("result-wrap"),h=document.getElementById("search-result"),f=document.getElementById("search-tpl").innerHTML;window.innerWidth?o=parseInt(window.innerWidth):document.body&&document.body.clientWidth&&(o=parseInt(document.body.clientWidth)),window.innerHeight?c=parseInt(window.innerHeight):document.body&&document.body.clientHeight&&(c=parseInt(document.body.clientHeight)),d.style.width=o+"px",d.style.height=c+"px",a.onfocus=function(){a.addEventListener("input",s)},d.onclick=function(){i(l,"hide"),i(d,"hide")}}();